---
title: adb å¸¸ç”¨å‘½ä»¤
date: 2017-02-10 10:59:45
categories: Android
tags: [AndroidåŸºç¡€,adb,]
---
æœ‰æ—¶å€™è¿˜çœŸæ˜¯éœ€è¦ä¸€äº› `adb` å‘½ä»¤è¾…åŠ©å¼€å‘ï¼Œæ¯”å¦‚æŠŠ `log` æ—¥å¿—å¯¼å‡ºæ¥ï¼ŒæŸ¥çœ‹ `ANR` æ—¥å¿—ï¼Œ`push` ç‚¹æ–‡ä»¶å•¥çš„ï¼Œåˆ·ä¸ªæœºä»€ä¹ˆçš„ ğŸ¤£

# adb å‘½ä»¤

## `adb locat`çœ‹æ—¥å¿—ç”¨
`adb locat | grep <åŒ…å>` #æ·»åŠ è¿‡æ»¤æ¡ä»¶
å¦‚æœè®°ä¸ä½åŒ…åä¹Ÿä¸ç”¨æ…Œ
`adb locat | grep START` æ‰§è¡Œè¿™æ¡å‘½ä»¤åï¼Œç‚¹å‡»è¦è¿‡æ»¤çš„ `app` ,æ‰¾ `cmp` èƒ½æ‰¾åˆ°

> 02-10 11:05:06.713   843 27262 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.dongao.mainclient.phone/.app.WelcomeActivity (has extras)} from uid 10015 on display 0
> 02-10 11:05:09.698  8156  8196 D PushService: action [com.dongao.mainclient.phone.intent.action.START]
> 02-10 11:05:14.796   843  1979 I ActivityManager: START u0 {cmp=com.dongao.mainclient.phone/.view.main.MainActivity} from uid 10110 on display 0
> 02-10 11:05:56.276   843  1506 I ActivityManager: START u0 {cmp=com.dongao.mainclient.phone/.view.user.LoginNewActivity} from uid 10110 on display 0 

å¯ä»¥å°† `locat` å­˜å‚¨åˆ°æ–‡ä»¶ä¸­
`adb shell logcat > log.txt`

## adb devices åˆ—å‡ºæ‰€æœ‰è¿æ¥è®¾å¤‡
ä¸€èˆ¬éƒ½æ˜¯æœ‰ä¸€ä¸ªè®¾å¤‡ï¼ŒåŒæ—¶å¼€æ¨¡æ‹Ÿå™¨ï¼Œæ’çœŸæœºå¯ä»¥ç”¨
```
â˜  ~  adb devices
List of devices attached
ZX1C62233S  device
```

## `adb connect <host>[:<port>]`
é€šè¿‡tcp/ip è¿æ¥ 5555 é»˜è®¤ç«¯å£ wifi è°ƒè¯•å¯ä»¥ç”¨ä¸€ä¸‹

## `adb push <local> <remote>` //å‘è®¾å¤‡æ¨é€æ–‡ä»¶
`adb push open_gapps-arm-7.1-pico-20170214.zip /mnt/sdcard/`

## `adb pull <remote> [<local>]` //ä»è®¾å¤‡å–å›æ–‡ä»¶
`adb pull /data/local/tmp/com.dongao.mainclient.phone ~/Documents/`
è¿™ä¸ªå¯èƒ½ä¼šå› ä¸ºæƒé™ä¸å¤Ÿä¸èƒ½æ‹·è´ Permission denied

> åŸå› ï¼šæ˜¯ç”±äºæ–‡ä»¶æƒé™åŸå› å¼•èµ·ã€‚
> ä½¿ç”¨ls -lå‘½ä»¤æŸ¥çœ‹androidç³»ç»Ÿä¸­çš„æ–‡ä»¶æƒé™ä¸ºï¼š
> -rw-rw---- app_51   app_51
> ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–‡ä»¶åªæœ‰app_51ç”¨æˆ·ä»¥åŠapp_51ç¾¤ç»„æ‹¥æœ‰è¯»å†™æƒé™ï¼Œè€Œadb shellçš„ç”¨æˆ·ä¸ºshellï¼Œæ—¢ä¸æ˜¯app_51ç”¨æˆ·ï¼Œä¹Ÿä¸åœ¨app_51ç¾¤ç»„ä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰æƒé™è¯»å–è¿™ä¸ªæ–‡ä»¶ã€‚æ‰€ä»¥å°±å‡ºç°äº†
> Permission deniedã€‚
> 
> è§£å†³æ–¹æ³•ï¼šä¿®æ”¹æ–‡ä»¶æƒé™ã€‚
> ä½¿ç”¨suå‘½ä»¤ï¼Œç”¨è¶…çº§ç”¨æˆ·ç™»å½•ã€‚ä¿®æ”¹è¯¥æ–‡ä»¶æƒé™ï¼Œè®©å…¶ä»–ç”¨æˆ·å¯ä»¥è¯»å–è¯¥æ–‡ä»¶ã€‚
> chmod 664 æ–‡ä»¶å
> å¦‚æœæ˜¯è¦ä½¿ç”¨adb pushä½¿ç”¨ç”µè„‘ä¸Šçš„æ–‡ä»¶è¦†ç›–è¯¥æ–‡ä»¶ï¼Œåˆ™éœ€è¦æŠŠå†™æƒé™ä¹Ÿè¦ç»™å…¶ä»–ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯ï¼š
> chmod 666 æ–‡ä»¶å

## `adb install [-l] [-r] [-s] <file>` //æ‹·è´æ–‡ä»¶åŒ…åˆ°è®¾å¤‡å¹¶å®‰è£…
å¸¸ç”¨å‚æ•° -r è¦†ç›–å®‰è£…

## `adb uninstall [-k] <package>` //å¸è½½ç¨‹åºåŒ…ï¼Œ-kæ„å‘³ç€ä¿ç•™æ•°æ®å’Œç¼“å­˜

## `adb reboot recovery` é‡å¯è¿›å…¥ `recovery` åˆ·æœºç»å¸¸ç”¨

--- update 2017/2/16 ---
# fastbootå‘½ä»¤

å½“æ‰‹æœºè¿›å»fastbootæ¨¡å¼çš„æ—¶å€™ï¼ŒPCç«¯å°±å¯ä»¥ä½¿ç”¨fastbootå‘½ä»¤æ“ä½œæ›´ä½å±‚çš„ä¸œè¥¿å•¦ï¼

## æ“¦é™¤åˆ†åŒº
```bash
fastboot erase {partition} 
ä¾‹ï¼š
fastboot erase boot
fastboot erase system
```

## çƒ§å†™æŒ‡å®šåˆ†åŒº
```bash
fastboot flash {partition} {*.img}
ä¾‹ï¼š
fastboot flash boot boot.img
fastboot flash system system.img
```

## çƒ§å†™æ‰€æœ‰åˆ†åŒº
```bash
fastboot flashall
æ³¨æ„ï¼šæ­¤å‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾æ‰€æœ‰imgæ–‡ä»¶ï¼Œå°†è¿™äº›imgæ–‡ä»¶çƒ§å†™åˆ°æ‰€æœ‰å¯¹åº”çš„åˆ†åŒºä¸­ï¼Œå¹¶é‡æ–°å¯åŠ¨æ‰‹æœºã€‚
```

ä¸€æ¬¡çƒ§å†™bootï¼Œsystemï¼Œrecoveryåˆ†åŒº

1. åˆ›å»ºåŒ…å«boot.imgï¼Œsystem.imgï¼Œrecovery.imgæ–‡ä»¶çš„zipåŒ…ã€‚
2. æ‰§è¡Œï¼šfastboot update {*.zip}

## çƒ§å†™å¼€æœºç”»é¢
```
fastboot flash splash1 å¼€æœºç”»é¢.bmp
```

## é‡å¯æ‰‹æœº
```bash
fastboot reboot
# é‡å¯åˆ°bootloader åˆ·æœºç”¨
fastboot reboot-bootloader
```


## å…ˆå†™åˆ°è¿™å„¿ï¼Œä»¥åå¸¸ç”¨çš„å†è¡¥å……

å‚è€ƒ [https://blog.phpgao.com/adb.html](https://blog.phpgao.com/adb.html)

